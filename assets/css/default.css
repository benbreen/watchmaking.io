@charset "UTF-8";

/* Fonts: loaded in fonts.css */
/* General desktop/mobile: loaded in initial.css */
/* default.css: contains everything else, like drop caps, link icons, tables, etc */

/**********/
/* COLORS */
/**********/
/* colors are now in /static/css/colors.css or dark-mode.css */

/****************/
/* FIXED COLORS */
/****************/
/* Not to be inverted in dark mode! */

:root {
    --GW-object-popup-background-color: #fff;
}

/*******************/
/* OTHER VARIABLES */
/*******************/

:root {
    --GW-sidenotes-max-width: 550px;

    /* Ben */
    --GW-popups-popup-max-width: 700px;
    --GW-popups-popup-max-height: 480px;
    --GW-popups-popup-with-title-bar-min-width: 320px;
    --GW-popups-annotation-popup-min-width: 360px;
    --GW-popups-annotation-popup-min-height: 120px;
    --GW-popups-aux-links-popup-min-width: 360px;
    --GW-popups-aux-links-popup-min-height: 120px;
    --GW-popups-local-transclude-popup-min-width: 360px;
    --GW-popups-local-transclude-popup-min-height: 120px;
    --GW-popups-popup-border-width: 3px;
    --GW-popups-popup-title-bar-height: calc(1.5rem + 1px);
    --GW-popups-popup-mini-title-bar-height: calc(1rem + 1px);
    --GW-popups-video-iframe-width: 495px;
    --GW-popups-video-iframe-height: 310px;
    --GW-popups-image-popup-min-size: 64px;

    --GW-popins-popin-max-height: 50vh;
    --GW-popins-popin-min-height: 120px;
    --GW-popins-popin-border-width: 3px;
    --GW-popins-popin-title-bar-height: 1.75rem;
}


/*=---------=*/
/*= Tooltip =*/
/*=---------=*/

.image-wrapper {
    position: relative;
    display: block;
    margin: auto;
    max-width: 100%;
}
.image-wrapper.focusable::after {
    content: "Click to enlarge";
    display: block;
    position: absolute;
    margin: auto;
    left: 0;
    right: 0;
    bottom: 0.5em;
    padding: 0.3em 0.75em 0.35em 0.75em;
    font-size: 1rem;
    font-family: var(--SA-image-focus-sans-serif-font-stack);
    background-color: var(--SA-image-focus-image-hover-tooltip-background-color);
    color: var(--SA-image-focus-image-hover-tooltip-text-color);
    border-radius: 0.25em;
    opacity: 0.0;
    transition: opacity 0.15s ease;
    pointer-events: none;
}
.image-wrapper,
.image-wrapper::after {
    width: -moz-fit-content;
    width: fit-content;
}
.image-wrapper.focusable:hover::after {
    opacity: 1.0;
}

/**************/
/* POP-FRAMES */
/**************/

.popframe .popframe-title-link::after {
    display: none;
}

.popframe .popframe-title-link-archived::after {
    content: none;
}

.popframe .popframe-title .separator {
    margin: 0 0.5em;
}

/*=-------------------=*/
/*= POP-FRAME CONTENT =*/
/*=-------------------=*/
/*  Adjustments for styles in pop-frames.
    */

.popframe .TOC {
    margin: 1.25em 0 0 0;
    padding: 0.5em 0.5em 0.75em 0.75em;

    /*  The following three properties are to prevent both overlap and
        margin-collapse of the TOC when there’s a floated thumbnail figure
        that juts down below the abstract text.
     */
    clear: both;
    display: inline-block;
    width: calc(100% - 1.25em);    /* Subtract side padding. */
}

.popframe .TOC > ul {
    column-width: 12em;
}

.popframe .TOC a:hover::after {
    margin: 0;
    bottom: unset;
    font-size: inherit;
    opacity: unset;
}

.popframe ul,
.popframe ol {
    overflow: unset;
}

.popframe:not(.zoomed) p + p,
.popframe:not(.zoomed) p + figure[class^='float-'] + p,
.popframe:not(.zoomed) div[class^='drop-cap-'] + p,
.popframe:not(.zoomed) .abstract.scrape-abstract-not + p, {
    text-indent: 1.75em;
}

.popframe:not(.zoomed) p + ul,
.popframe:not(.zoomed) p + ol {
    margin-top: 0.2em;
    margin-bottom: 0.2em;
}

.popframe:not(.zoomed) li {
    text-align: left;
}

.popframe h1,
.popframe h2,
.popframe h3,
.popframe h4,
.popframe h5,
.popframe h6 {
    margin-left: 0;
}
.popframe h1 a:link,
.popframe h2 a:link,
.popframe h3 a:link,
.popframe h4 a:link,
.popframe h5 a:link,
.popframe h6 a:link {
    background-image: none;
    text-shadow: none;
}

.popframe:not(.zoomed) blockquote {
    margin: 1em 0;
}

.popframe .popframe-content-view > figure:only-child {
    margin: 0;
    max-width: unset;
}

.popframe.local-transclude .popframe-content-view > blockquote:first-child,
.popframe.local-transclude .popframe-content-view > .table-wrapper:first-child,
.popframe.local-transclude .popframe-content-view > div.sourceCode:first-child pre {
    margin-top: calc(3em/9);
}
.popframe.local-transclude .popframe-content-view > blockquote:last-child,
.popframe.local-transclude .popframe-content-view > .table-wrapper:last-child,
.popframe.local-transclude .popframe-content-view > div.sourceCode:last-child pre {
    margin-bottom: calc(1em/9);
}

.popframe .popframe-content-view > hr:first-child {
    display: none;
}

.popframe #footnotes > hr:first-child, 
.popframe #footnotes > hr:first-child + a.section-self-link {
	display: none;
}

.popframe #footnotes li > blockquote:nth-last-child(2),
.popframe #footnotes li > pre:nth-last-child(2),
.popframe #footnotes li > .sourceCode:nth-last-child(2) {
	margin-bottom: 2em;
}

.popframe .footnotes .footnote-back {
    vertical-align: text-top;
}

/*  Drop caps in pop-frames.
    */
.popframe.markdownBody .drop-cap-goudy > p,
.popframe.markdownBody .drop-cap-yinit > p,
.popframe.markdownBody .drop-cap-de-zs > p,
.popframe.markdownBody .drop-cap-cheshire > p,
.popframe.markdownBody .drop-cap-kanzlei > p {
    text-indent: 0;
}
.popframe.markdownBody .drop-cap-goudy > p::first-letter {
    font-size: 6.5em;
}
.popframe.markdownBody .drop-cap-yinit > p::first-letter {
    font-size: 5.125em;
}
.popframe.markdownBody .drop-cap-de-zs > p::first-letter {
    font-size: 6.375em;
}
.popframe.markdownBody .drop-cap-cheshire > p::first-letter {
    font-size: 6.375em;
}
.popframe.markdownBody .drop-cap-kanzlei > p::first-letter {
    font-size: 6.625em;
}

.popframe-content-view > [class^='drop-cap-']:last-child {
    overflow: hidden;
}

/*  Margin notes in pop-frames.
    */
.popframe .marginnote {
    display: initial;
}

/*=-----------------=*/
/*= POP-FRAME TYPES =*/
/*=-----------------=*/

/*┌──────────────────────┐*/
/*│ Aux-link pop-frames. │*/
/*└──────────────────────┘*/

.popframe.backlinks .columns ul {
    margin: 0.75em 0 1em 0;
    padding: 0 0 0 1.75em;
}

/*┌────────────────────────┐*/
/*│ Annotation pop-frames. │*/
/*└────────────────────────┘*/

/*  Data fields.
    */
.popframe.annotation .data-field {
    text-align: left;
    text-indent: 0;
}
.popframe.annotation .data-field + .data-field {
    margin-top: 0.25em;
}

.popframe.annotation .data-field.title {
    font-weight: bold;
    font-size: 1.125em;
    line-height: 1.35;
}
.popframe.annotation .data-field.author {
    font-style: italic;
}
.popframe.annotation .date-plus-cites {
    display: inline-block;
}
.popframe.annotation .originalURL {
    font-variant-caps: small-caps;
    margin: 0 0.5em 0 0;
    font-size: 0.875em;
}
.popframe.annotation .iaMirror {
    padding-right: 0.3em;
}
.popframe.annotation .link-tags a {
    -webkit-hyphens: none;
    -moz-hyphens: none;
    hyphens: none;
}
.popframe.annotation .data-field.annotation-abstract {
    margin-top: 0.5em;
}

/*  Images (such as the ones in Wikipedia pop-frames).
    */
.popframe.annotation .popframe-content-view > figure.float-right {
    margin: 0.125em 0 0.125em 1.5em;
    max-width: calc(50% - 1.5em);
    float: right;
}
.popframe.annotation figure.float-left .image-wrapper,
.popframe.annotation figure.float-right .image-wrapper {
    max-width: 100%;
}
.popframe.annotation figure img {
    width: 100%;
}

/*  Wikipedia entries.
 */
.wikipedia-entry .table-wrapper {
    margin: 1.5em 0 1.5em 0;
    clear: both;
}
.wikipedia-entry .infobox {
    font-size: 0.9em;
}
.wikipedia-entry .infobox tbody tr:hover {
    outline: none;
}
.wikipedia-entry .infobox th[colspan="2"],
.wikipedia-entry .infobox td[colspan="2"],
.wikipedia-entry .infobox th.sidebar-title,
.wikipedia-entry .infobox th.sidebar-heading {
    text-align: center;
}
.wikipedia-entry .infobox th {
    border-top: 1px solid var(--GW-table-row-horizontal-border-color);
}
.wikipedia-entry .infobox tr:first-of-type th {
    font-size: 1.25em;
}
.wikipedia-entry .infobox td:first-child {
    font-weight: bold;
}
.wikipedia-entry .infobox td ul {
    margin: 0.25em 0;
    padding: 0 0 0 1.5em;
}
.popframe.annotation .popframe-content-view.wikipedia-entry > figure.float-right {
    margin: 0.125em 0 0.75em 1.5em;
}
.wikipedia-entry #Timeline-row {
    display: flex;
    width: -moz-fit-content;
    width: fit-content;
    margin: 0.25em auto;
}
.wikipedia-entry th br ~ * {
    font-weight: normal;
    font-size: calc((1 / 1.25) * 1em);
}
.wikipedia-entry .hatnote {
    margin: 0 0 0.75em 0;
    font-style: italic;
}
.wikipedia-entry .chemf {
	word-break: break-all;
}

/*  Special case for inline math in Wikipedia pop-frames.
    */
.wikipedia-entry .mwe-math-element {
    display: inline-block;
    height: 1.25em;
    line-height: 1;
    margin: 0;
    vertical-align: bottom;
    padding: 0;
    text-indent: 0;
}
.wikipedia-entry .mwe-math-element img {
    display: inline-block;
    height: 100%;
}
/*  Ditto, but block math.
 */
.wikipedia-entry dl .mwe-math-element {
    display: block;
    height: unset;
}
.wikipedia-entry dl .mwe-math-element img {
    display: block;
}

/* WP wraps references entirely in <cite> elements; <cite> is styled by browsers (Chrome/FF) by default in italics. No one wants their entire reference in italics, so WP resets the font to the default style (whatever that is), and styles italics bits (like book titles) manually. We need to replicate that, or else references sections in our WP popups will be entirely italics! */
.wikipedia-entry cite, 
.wikipedia-entry dfn {
	font-style: inherit; 
}

/*┌──────────────────────┐*/
/*│ Footnote pop-frames. │*/
/*└──────────────────────┘*/
/* http://ignorethecode.net/blog/2010/04/20/footnotes/ */

.popframe.footnote .popframe-content-view > blockquote:last-child {
    margin-bottom: calc(1em/9);
}

/*┌──────────────────────────────┐*/
/*│ Citation context pop-frames. │*/
/*└──────────────────────────────┘*/

/*┌──────────────────┐*/
/*│ Code pop-frames. │*/
/*└──────────────────┘*/

.popframe.local-code-file .popframe-content-view {
    padding: 0;
}
.popframe.local-code-file .popframe-content-view div.sourceCode {
    height: 100%;
}
.popframe.local-code-file pre {
    height: 100%;
    margin: 0;
    border: none;
    max-height: unset;
}

/*  “Loading failed” message.
    */
.popframe.local-code-file.loading-failed::after {
    content: "File not found.";
}

/*  “Raw code” pop-frames.
    */
.popframe.local-code-file pre.raw-code {
    white-space: pre-wrap;
}
.popframe.local-code-file pre.raw-code code {
    word-break: break-word;
    padding-left: 2px;
    padding-right: 2px;
}
.popframe.local-code-file pre.raw-code .line {
    counter-increment: code-line;
    display: inline-block;
    width: 100%;
    position: relative;
    padding: 0 0 0.25em 4em;
    box-sizing: border-box;
}
.popframe.local-code-file pre.raw-code .line:hover {
    background-color: var(--GW-raw-code-popframe-line-highlight-background-color);
    box-shadow:
    0  1px 0 0 var(--GW-raw-code-popframe-line-hightlight-border-color),
    0 -1px 0 0 var(--GW-raw-code-popframe-line-hightlight-border-color);
}
.popframe.local-code-file pre.raw-code .line::before {
    content: counter(code-line);
    position: absolute;
    width: 3.5em;
    height: 100%;
    left: 0;
    top: 0;
    text-align: right;
    color: var(--GW-raw-code-popframe-line-number-color);
    font-size: 0.8em;
    display: flex;
    justify-content: flex-end;
    align-items: flex-start;
    padding: 0.25em 0.5em 0 0;
    border-right: 1px solid var(--GW-raw-code-popframe-line-number-divider-color);
}

/*┌────────────────────┐*/
/*│ Object pop-frames. │*/
/*└────────────────────┘*/
/*  “Object pop-frames”: videos, images, PDFs, archived web pages, etc.
    */

.popframe.object .popframe-content-view {
    padding: 0;
}

.popframe.object img,
.popframe.object video,
.popframe.object iframe,
.popframe.object object {
    display: block;
}

/*┌───────────────────┐*/
/*│ Image pop-frames. │*/
/*└───────────────────┘*/

/*  “Loading failed” message.
    */
.popframe.image.loading-failed::after {
    content: "Image not found.";
}

/*┌───────────────────┐*/
/*│ Video pop-frames. │*/
/*└───────────────────┘*/

/*  “Loading failed” message.
    */
.popframe.video.loading-failed::after {
    content: "Video not found.";
}

/*┌───────────────────┐*/
/*│ Audio pop-frames. │*/
/*└───────────────────┘*/

/*  “Loading failed” message.
    */
.popframe.video.loading-failed::after {
    content: "Audio file not found.";
}

/*┌────────────────────────────┐*/
/*│ Local document pop-frames. │*/
/*└────────────────────────────┘*/

/*  “Loading failed” message.
    */
.popframe.local-document.loading-failed::after {
    content: "File not found.";
}

/*┌──────────────────────────────┐*/
/*│ Local transclude pop-frames. │*/
/*└──────────────────────────────┘*/

.popframe.local-transclude .popframe-content-view {
    overflow-x: hidden;
}

.popframe .popframe-content-view > h1:first-child,
.popframe .popframe-content-view > h2:first-child,
.popframe .popframe-content-view > h3:first-child,
.popframe .popframe-content-view > h4:first-child,
.popframe .popframe-content-view > h5:first-child,
.popframe .popframe-content-view > h6:first-child {
    margin-top: 0;
}

.popframe #page-metadata {
    margin: 0;
    overflow: visible;
}
.popframe #page-metadata::after {
    content: "";
    display: block;
    border-bottom: 1px dotted currentColor;
}

/**********/
/* POPUPS */
/**********/

/*=----------------------=*/
/*= GENERAL POPUP STYLES =*/
/*=----------------------=*/

/*  Overlay that holds all popups as immediate children.
    */
.popup-container {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    pointer-events: none;
}
.popup-container > * {
    pointer-events: auto;
}

/*  The three nested boxes that make up a popup:
    1. Outer frame (positioned within the popup container)
    2. Scroll view
    3. Content view

    The content view contains the actual contents of a popup.
    */
.popup,
.popup .popframe-scroll-view,
.popup .popframe-content-view,
.popup .popframe-title-bar {
    box-sizing: border-box;
}

/*┌────────────────────┐*/
/*│ Popup outer frame. │*/
/*└────────────────────┘*/

.popup {
    /*  Layout. */
    position: absolute;
    overflow: visible;
    max-width: var(--GW-popups-popup-max-width);
    max-height: 100vh;
    z-index: 1;

    /*  Styling. */
    border: var(--GW-popups-popup-border-width) double var(--GW-popups-popup-border-color);
    box-shadow: 1px 2px 8px 0 var(--GW-popups-box-shadow-color);
    background-color: var(--GW-popups-popup-background-color);
}

/*┌──────────────────┐*/
/*│ Popup title bar. │*/
/*└──────────────────┘*/

.popup.has-title-bar {
    min-width: var(--GW-popups-popup-with-title-bar-min-width);
}

.popup .popframe-title-bar {
    position: absolute;
    height: var(--popup-title-bar-height);
    border-bottom: 1px solid var(--GW-popups-popup-border-color);
    background-color: var(--GW-popups-popup-title-bar-background-color);
    display: flex;
    flex-flow: row;
    align-items: center;
    width: 100%;
    cursor: grab;
    z-index: 11;
}

.popup.has-title-bar.mini-title-bar .popframe-title-bar {
    overflow: hidden;
}
.popup.grabbed .popframe-title-bar,
.popup.dragging .popframe-title-bar,
.popup.dragging .popframe-title-bar a {
    cursor: grabbing;
}

.popup {
    --popup-title-bar-height: 0px;
}
.popup.has-title-bar {
    --popup-title-bar-height: var(--GW-popups-popup-title-bar-height);
    --popup-title-bar-button-size: var(--popup-title-bar-height) - 1px;
}
.popup.has-title-bar.mini-title-bar {
    --popup-title-bar-height: var(--GW-popups-popup-mini-title-bar-height);
}

/*  Popup title.
    */
.popup .popframe-title {
    font-family: var(--GW-sans-serif-font-stack);
    font-size: 0.8rem;
    font-weight: bold;
    flex: 1 1 100%;
    /*  Extra 3rem padding on left to accommodate 2 extra buttons. */
    padding: 0 4rem 0 1rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    text-decoration: none;
    text-align: center;
}
.popup.mini-title-bar .popframe-title {
    visibility: hidden;
    padding: 0;
    flex: 0 1 100%;
    line-height: 0;
}
.popup .popframe-title,
.popup .popframe-title span,
.popup .popframe-title a {
    color: var(--GW-popups-popup-title-color);
}
.popup .popframe-title a:hover {
    color: var(--GW-popups-popup-title-link-hover-color);
}
.popup .popframe-title::after {
    display: none;
}

/*  Buttons in the popup title bar.
    */
.popup .popframe-title-bar-button {
    -moz-appearance: none;
    appearance: none;
    border: none;
    background-color: transparent;
    font-size: inherit;
    font-family: inherit;
    font-weight: inherit;
    font-style: inherit;
    line-height: 0;
    margin: 0 1px 0 0;
    padding: 4px;
    height: 100%;
    flex: 0 0 1.5rem;
    width: var(--popup-title-bar-button-size);
    cursor: pointer;
    color: var(--GW-popups-popup-title-bar-button-color);
}
.popup.mini-title-bar .popframe-title-bar-button {
    padding: 2px;
    flex: 0 0 1rem;
}
.popup .popframe-title-bar-button:hover {
    color: var(--GW-popups-popup-title-bar-button-color-hover);
}
.popup .popframe-title-bar-button:active {
    transform: scale(0.9);
}
.popup .popframe-title-bar-button svg {
    max-width: 100%;
    max-height: 100%;
}

.popup .popframe-title-bar-button:disabled {
    pointer-events: none;
    opacity: 0.35;
}

.popup.mini-title-bar button.zoom-button,
.popup.mini-title-bar button.options-button {
    display: none;
}

/*  Submenus of buttons in the popup title bar.
    */

.popup .popframe-title-bar .submenu {
    position: absolute;
    top: var(--popup-title-bar-height);
    background-color: var(--GW-popups-popup-title-bar-background-color);
    display: grid;
    grid-template-columns: auto auto auto;
    grid-gap: 1px;
    padding: 0 1px 1px 1px;
    background-color: var(--GW-popups-popup-border-color);
    visibility: hidden;
    box-shadow:
        1px 1px 0 0 var(--GW-popups-popup-title-bar-submenu-box-shadow-color);
    opacity: 0.0;
    transition:
        visibility 0.1s ease 0.2s,
        opacity 0.1s ease 0.2s;
}
.popup .popframe-title-bar .zoom-button + .submenu {
    left: -1px;
}
.popup .popframe-title-bar .submenu:hover,
.popup .popframe-title-bar .has-submenu:hover + .submenu {
    visibility: visible;
    opacity: 1.0;
}
.popup .popframe-title-bar .submenu button {
    background-color: var(--GW-popups-popup-title-bar-background-color);
    border: none;
    margin: 0;
}
.popup .popframe-title-bar .submenu button svg {
    height: calc(var(--popup-title-bar-button-size) - 8px);
    width: calc(var(--popup-title-bar-button-size) - 8px);
}

/*┌────────────────────┐*/
/*│ Popup scroll view. │*/
/*└────────────────────┘*/

.popup .popframe-scroll-view {
    overflow-y: auto;
    overscroll-behavior: none;
    max-height: calc(var(--GW-popups-popup-max-height) - 2 * var(--GW-popups-popup-border-width) - var(--popup-title-bar-height));
    height: 100%;
    margin-top: var(--popup-title-bar-height);
}

/*  Scroll bar styles (for WebKit/Blink).
    */
.popup .popframe-scroll-view::-webkit-scrollbar {
    width: 14px;
}
.popup .popframe-scroll-view::-webkit-scrollbar-thumb {
    background-color: var(--GW-popups-popup-scrollbar-thumb-color);
    box-shadow:
        0 0 0 3px var(--GW-popups-popup-scrollbar-track-color) inset;
}
.popup .popframe-scroll-view::-webkit-scrollbar-thumb:hover {
    background-color: var(--GW-popups-popup-scrollbar-thumb-hover-color);
}

/*  Scroll bar styles (for Firefox).
    */
.popup .popframe-scroll-view {
    scrollbar-color: var(--GW-popups-popup-scrollbar-thumb-color) var(--GW-popups-popup-scrollbar-track-color);
}
.popup .popframe-scroll-view:hover {
    scrollbar-color: var(--GW-popups-popup-scrollbar-thumb-hover-color) var(--GW-popups-popup-scrollbar-track-color);
}

/*┌─────────────────────┐*/
/*│ Popup content view. │*/
/*└─────────────────────┘*/

.popup .popframe-content-view {
    background-color: var(--GW-popups-popup-background-color);
    font-size: 0.9em;
    padding: calc(7em/9) 1em calc(8em/9) 1em;
    overflow: auto;
    line-height: 1.50;
}

/*┌─────────────────┐*/
/*│ Focused popups. │*/
/*└─────────────────┘*/

.popup:not(.focused) .popframe-title-bar * {
    pointer-events: none;
}

.popup.focused {
    --GW-popups-popup-border-color: var(--GW-popups-popup-border-focused-color);
    --GW-popups-box-shadow-color: var(--GW-popups-box-shadow-focused-color);

    --GW-popups-popup-title-bar-background-color: var(--GW-popups-popup-title-bar-background-focused-color);
    --GW-popups-popup-title-bar-button-color: var(--GW-popups-popup-title-bar-button-focused-color);
    --GW-popups-popup-title-bar-button-color-hover: var(--GW-popups-popup-title-bar-button-focused-color-hover);
    --GW-popups-popup-title-color: var(--GW-popups-popup-title-focused-color);
    --GW-popups-popup-title-link-hover-color: var(--GW-popups-popup-title-link-hover-focused-color);

    --GW-popups-popup-scrollbar-thumb-color: var(--GW-popups-popup-scrollbar-thumb-focused-color);
    --GW-popups-popup-scrollbar-thumb-hover-color: var(--GW-popups-popup-scrollbar-thumb-hover-focused-color);
}

/*┌──────────────────────────┐*/
/*│ Zoomed / resized popups. │*/
/*└──────────────────────────┘*/

.popup.zoomed .popframe-content-view,
.popup.resized .popframe-content-view {
    max-width: 970px;
    margin: auto;
}

.popup.zoomed.full .popframe-content-view {
    font-size: 1em;
    line-height: 1.60;
}

.popup.object.zoomed .popframe-content-view,
.popup.object.resized .popframe-content-view,
.popup.local-code-file.zoomed .popframe-content-view,
.popup.local-code-file.resized .popframe-content-view {
    max-width: unset;
    height: 100%;
}

.popup.object.zoomed iframe,
.popup.object.zoomed object ,
.popup.object.resized iframe,
.popup.object.resized object {
    width: 100%;
    height: 100%;
}

/*┌───────────────────┐*/
/*│ Collapsed popups. │*/
/*└───────────────────┘*/

.popup.collapsed[class] {
    height: unset;
    min-height: unset;
}
.popup.collapsed .popframe-title-bar {
    border-bottom: none;
    height: calc(var(--popup-title-bar-height) - 1px);
}
.popup.collapsed .popframe-scroll-view {
    height: 0;
    margin-top: calc(var(--popup-title-bar-height) - 1px);
}

/*┌───────────────────────────┐*/
/*│ Transitional UI elements. │*/
/*└───────────────────────────┘*/

/*  Animated spawn/despawn.
 */
.popup {
    opacity: 1.0;
    transition: none;
}
.popup.fading {
    opacity: 0.0;
    transition:
        opacity 0.25s ease-in 0.1s;
}

/*  Spinners.
 */
.popup.loading::before,
.popup.rendering::before {
    position: absolute;
    width: 3em;
    height: 3em;
    max-height: calc(6em - var(--popup-title-bar-height) - 1px);
    top: var(--popup-title-bar-height);
    bottom: 0;
    left: 0;
    right: 0;
    margin: auto;
    display: block;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    opacity: 0.2;
    z-index: 1;
}
@keyframes fa-spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/*  Loading spinner (for object popups).
 */
.popup.loading::before {
    content: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M288 24.103v8.169a11.995 11.995 0 0 0 9.698 11.768C396.638 63.425 472 150.461 472 256c0 118.663-96.055 216-216 216-118.663 0-216-96.055-216-216 0-104.534 74.546-192.509 174.297-211.978A11.993 11.993 0 0 0 224 32.253v-8.147c0-7.523-6.845-13.193-14.237-11.798C94.472 34.048 7.364 135.575 8.004 257.332c.72 137.052 111.477 246.956 248.531 246.667C393.255 503.711 504 392.789 504 256c0-121.187-86.924-222.067-201.824-243.704C294.807 10.908 288 16.604 288 24.103z"/></svg>');
    animation: fa-spin 2s infinite linear;
}

.popup.image.loading img,
.popup.image.loading-failed img,
.popup.object.loading-failed iframe {
    visibility: hidden;
}

/*  Rendering spinner.
 */
.popup.rendering::before {
    content: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M460.115 373.846l-6.941-4.008c-5.546-3.202-7.564-10.177-4.661-15.886 32.971-64.838 31.167-142.731-5.415-205.954-36.504-63.356-103.118-103.876-175.8-107.701C260.952 39.963 256 34.676 256 28.321v-8.012c0-6.904 5.808-12.337 12.703-11.982 83.552 4.306 160.157 50.861 202.106 123.67 42.069 72.703 44.083 162.322 6.034 236.838-3.14 6.149-10.75 8.462-16.728 5.011z"/></svg>');
    animation: fa-spin 3s infinite linear;
}

/*  “Loading failed” messages (for object popups).
    */
.popup.loading-failed::after {
    content: "Loading failed.";
    position: absolute;
    left: 0;
    top: var(--popup-title-bar-height);
    width: 100%;
    height: calc(100% - var(--popup-title-bar-height) - 1px);
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2em;
    font-family: var(--GW-sans-serif-font-stack);
    font-weight: bold;
    text-transform: uppercase;
    opacity: 0.35;
}

/*=-------------=*/
/*= POPUP TYPES =*/
/*=-------------=*/

/*┌────────────────────┐*/
/*│ Annotation popups. │*/
/*└────────────────────┘*/

.popup.annotation {
    min-width: var(--GW-popups-annotation-popup-min-width);
    min-height: var(--GW-popups-annotation-popup-min-height);
}

/*┌──────────────────┐*/
/*│ Footnote popups. │*/
/*└──────────────────┘*/

/*┌──────────────────────────┐*/
/*│ Citation context popups. │*/
/*└──────────────────────────┘*/

/*┌──────────────────┐*/
/*│ Aux-link popups. │*/
/*└──────────────────┘*/

.popup.aux-links {
    min-width: var(--GW-popups-aux-links-popup-min-width);
    min-height: var(--GW-popups-aux-links-popup-min-height);
}

/*┌──────────────┐*/
/*│ Code popups. │*/
/*└──────────────┘*/

.popup.local-code-file {
    width: var(--GW-popups-popup-max-width);
    height: var(--GW-popups-popup-max-height);
}

.popframe.local-code-file .popframe-content-view {
    height: 100%;
}

/*┌────────────────┐*/
/*│ Object popups. │*/
/*└────────────────┘*/

.popup.object {
    width: var(--GW-popups-popup-max-width);
    height: var(--GW-popups-popup-max-height);
}

.popframe.object .popframe-content-view {
    background-color: var(--GW-object-popup-background-color);
}

.popup.object iframe,
.popup.object object {
    width: calc(var(--GW-popups-popup-max-width) - 2 * var(--GW-popups-popup-border-width));
    height: calc(var(--GW-popups-popup-max-height) - 2 * var(--GW-popups-popup-border-width) - var(--popup-title-bar-height));
}

/*┌───────────────┐*/
/*│ Image popups. │*/
/*└───────────────┘*/

.popup.image {
    width: unset;
    min-width: var(--GW-popups-image-popup-min-size);
    height: unset;
    min-height: var(--GW-popups-image-popup-min-size);
}

.popup.image img {
    margin: auto;
    max-width: calc(var(--GW-popups-popup-max-width) - 2 * var(--GW-popups-popup-border-width));
    max-height: calc(var(--GW-popups-popup-max-height) - 2 * var(--GW-popups-popup-border-width) - var(--popup-title-bar-height));
    object-fit: contain;
    background-color: var(--GW-popups-popup-border-color);
}
.popup.image img.invertible,
.popup.image img.invertible-auto {
    background-color: var(--GW-body-background-color);
}

/*  Loading spinner.
    */
.popup.image.loading::before {
    height: 2em;
    width: 2em;
}

/*  “Loading failed” message.
    */
.popup.image:not(.dimensions-specified).loading-failed::after {
    content: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"/></svg>');
    box-sizing: border-box;
    padding: 8px;
    width: calc(var(--GW-popups-image-popup-min-size) - 2 * var(--GW-popups-popup-border-width));
    height: calc(var(--GW-popups-image-popup-min-size) - 2 * var(--GW-popups-popup-border-width));
    opacity: 0.2;
    margin: auto;
}

/*┌───────────────┐*/
/*│ Video popups. │*/
/*└───────────────┘*/

/*  Popups for videos.
    */
.popup.video {
    width: unset;
    height: unset;
}
.popup.video iframe {
    width: var(--GW-popups-video-iframe-width);
    height: var(--GW-popups-video-iframe-height);
}

/*┌───────────────┐*/
/*│ Audio popups. │*/
/*└───────────────┘*/

/*┌────────────────────────┐*/
/*│ Local document popups. │*/
/*└────────────────────────┘*/

/*┌──────────────────────────┐*/
/*│ Local transclude popups. │*/
/*└──────────────────────────┘*/

.popup.local-transclude {
    min-width: var(--GW-popups-local-transclude-popup-min-width);
    min-height: var(--GW-popups-local-transclude-popup-min-height);
}

/*  Table of contents popups.
    */
.popup.local-transclude.toc-section .popframe-scroll-view {
    max-height: calc(100vh - 2 * var(--GW-popups-popup-border-width) - var(--popup-title-bar-height));
}

/*  External page embeds popups.
    */
.popup.external-page-embed {
    width: var(--GW-popups-popup-max-width);
    height: var(--GW-popups-popup-max-height);
}

.popup #page-metadata::after {
    width: calc(100% + 2em);
    margin: 1em -1em 1.125em -1em;
}

/*┌─────────────┐*/
/*│ Tag popups. │*/
/*└─────────────┘*/
/* on tag/directory index popups, we want to hide the initial '# Links' <h1> because it takes up way too much space and adds nothing. */
.popup h1.display-pop-not, 
.popin h1.display-pop-not {
	display: none;
}

/* We also want to squeeze the directory list because the default unordered-list padding of 2em bottom uses up too much of a popup. */
.popup #directory-indexes ul {
	margin-top: 0.5em; 
	margin-bottom: 0.5em; 
}

/*=---------------=*/
/*= POPUP CONTENT =*/
/*=---------------=*/
/*  Adjustments for styles in popups.
    */

.popup:not(.pinned) .popframe-content-view .image-wrapper::after {
    display: none;
}

/*  Page thumbnails in local page transclude popups.
 */
.popup .abstract figure {
    float: right;
    max-width: calc(50% - 1em);
    margin: 0.5em 0 1em 1em;
}

/*=-----------------------=*/
/*= POPUPS OPTIONS DIALOG =*/
/*=-----------------------=*/

#popup-options-dialog {
    position: fixed;
    left: 0;
    top: 0;
    width: 100vw;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: var(--GW-popups-popup-options-dialog-backdrop-background-color);
    z-index: 2;
    opacity: 1;
    transition:
        opacity 0.15s ease;
}
#popup-options-dialog.fading {
    opacity: 0;
}

#popup-options-dialog > div {
    position: absolute;
    width: 500px;
    background-color: var(--GW-popups-popup-options-dialog-background-color);
    border: 1px solid var(--GW-popups-popup-options-dialog-border-color);
    box-shadow: 0 2px 2px 0 var(--GW-popups-popup-options-dialog-box-shadow-color);
    font-family: var(--GW-sans-serif-font-stack);
    user-select: none;
}

#popup-options-dialog .popup-options-dialog-title-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.5em;
    border-bottom: 1px solid var(--GW-popups-popup-options-dialog-horizontal-rule-color);
}

#popup-options-dialog h1 {
    margin: 0 0 0 0.75em;
    text-align: center;
    font-feature-settings: unset;
    font-size: 1.5em;
}

#popup-options-dialog button {
    -moz-appearance: none;
    appearance: none;
    border: none;
    background-color: inherit;
    font-family: inherit;
    font-size: inherit;
}

#popup-options-dialog button.save-button {
    background-color: var(--GW-popups-popup-options-dialog-button-background-color);
    padding: 0 0.75em;
    height: 2em;
    line-height: 1;
    font-weight: 600;
    color: var(--GW-popups-popup-options-dialog-button-text-color);
    border: 1px solid var(--GW-popups-popup-options-dialog-button-border-color);
}
#popup-options-dialog button.save-button:hover {
    cursor: pointer;
    box-shadow:
        0 0 0 2px var(--GW-popups-popup-options-dialog-button-background-color) inset,
        0 0 0 3px var(--GW-popups-popup-options-dialog-button-hover-box-shadow-color) inset;
}
#popup-options-dialog button.save-button:active {
    box-shadow:
        0 0 0 4px var(--GW-popups-popup-options-dialog-button-background-color) inset,
        0 0 0 5px var(--GW-popups-popup-options-dialog-button-hover-box-shadow-color) inset;
}

#popup-options-dialog button.close-button {
    position: relative;
    width: 2em;
    height: 2em;
    color: var(--GW-popups-popup-options-dialog-button-text-color);
}
#popup-options-dialog button.close-button:hover {
    cursor: pointer;
    box-shadow: 1px 1px 0 0 currentColor;
}
#popup-options-dialog button.close-button:active {
    left: 1px;
    top: 1px;
    box-shadow:
        -1px -1px 0 0 currentColor;
}
#popup-options-dialog button.close-button svg {
    height: 100%;
    width: 100%;
    fill: currentColor;
}

#popup-options-dialog .option-buttons {
    padding: 0.5em 1.5em 0.75em 1.5em;
}
#popup-options-dialog .option-buttons label {
    font-size: 1.125rem;
    font-weight: bold;
    text-align: left;
    display: flex;
    align-items: flex-start;
    width: 100%;
}
#popup-options-dialog .option-buttons label .button-text {
    display: block;
    flex: 1 0 100%;
    padding: 0.5em 0.75em;
}
#popup-options-dialog .option-buttons label input:checked + .button-text .label {
    text-decoration: underline;
}
#popup-options-dialog .option-buttons label .explanation {
    display: block;
    font-weight: normal;
    font-size: 0.875rem;
    color: var(--GW-popups-popup-options-dialog-option-button-explanation-text-color);
}
#popup-options-dialog .option-buttons label:hover,
#popup-options-dialog .option-buttons label:hover input {
    cursor: pointer;
}
#popup-options-dialog .option-buttons label:hover {
    color: var(--GW-popups-popup-options-dialog-option-button-hover-text-color);
}
#popup-options-dialog .option-buttons label:hover .button-text .label {
    text-decoration: dotted underline;
}

#popup-options-dialog .option-buttons input {
    appearance: none;
    -moz-appearance: none;
    font-family: inherit;
    font-size: inherit;
    border: 1px solid var(--GW-popups-popup-options-dialog-radio-button-border-color);
    width: 1rem;
    height: 1rem;
    padding: 0;
    margin: 0.75em 0 0 0;
    flex: 1 0 auto;
    transition:
        box-shadow 0.15s ease;
}

#popup-options-dialog .option-buttons input:checked {
    box-shadow:
        0 0 0 3px var(--GW-popups-popup-options-dialog-button-background-color) inset,
        0 0 0 1em var(--GW-popups-popup-options-dialog-button-hover-box-shadow-color) inset;
}

/*  With popups disabled, the “show popup options dialog” icon/button.
    */
#popups-disabled-show-popup-options-dialog-button {
    position: fixed;
    top: calc(0.55em + 3px);
    right: 12em;
    z-index: 1;
    opacity: 0.3;
    visibility: visible;
    transition:
        opacity 2s ease;
}
@media only screen and (max-width: 1760px) {
    #popups-disabled-show-popup-options-dialog-button {
        top: 15em;
        right: 0.6em;
    }
}
#popups-disabled-show-popup-options-dialog-button.hidden {
    opacity: 0;
}
#popups-disabled-show-popup-options-dialog-button:hover {
    opacity: 1.0;
    transition: none;
}
#popups-disabled-show-popup-options-dialog-button button {
    -moz-appearance: none;
    appearance: none;
    border: none;
    font-family: inherit;
    font-size: inherit;
    background: inherit;
    color: var(--GW-popups-show-popup-options-dialog-button-color);
    fill: currentColor;
    padding: 0;
    line-height: 1;
    display: block;
    width: 1.125em;
}
#popups-disabled-show-popup-options-dialog-button button:hover {
    cursor: pointer;
    opacity: 1.0;
}
#popups-disabled-show-popup-options-dialog-button button:active {
    transform: scale(0.95);
}

/**********/
/* POPINS */
/**********/

/*  The three nested boxes that make up a popin:
    1. Outer frame (positioned within the block flow, after the spawning target)
    2. Scroll view
    3. Content view

    The content view contains the actual contents of a popin.
    */
.popin,
.popin .popframe-scroll-view,
.popin .popframe-content-view,
.popin .popframe-title-bar {
    box-sizing: border-box;
}

/*┌────────────────────┐*/
/*│ Popin outer frame. │*/
/*└────────────────────┘*/

.popin {
    /*  Layout. */
    display: block;
    position: relative;
    float: left;
    width: 100%;
    max-height: var(--GW-popins-popin-max-height);
    min-height: var(--GW-popins-popin-min-height);
    overflow: visible;
    z-index: 11;

    margin: 1em 0;

    /*  Styling. */
    border: var(--GW-popins-popin-border-width) double var(--GW-popins-popin-border-color);
    filter: drop-shadow(1px 2px 4px var(--GW-popins-box-shadow-color));
    background-color: var(--GW-popins-popin-background-color);
}

.popin + .popin {
    display: none;
}

/*┌──────────────────┐*/
/*│ Popin title bar. │*/
/*└──────────────────┘*/

.popin .popframe-title-bar {
    position: absolute;
    right: calc(-1 * var(--GW-popins-popin-border-width));
    bottom: calc(100%);
    height: calc(var(--GW-popins-popin-border-width) + var(--GW-popins-popin-title-bar-height));
    max-width: calc(100% + (2 * var(--GW-popins-popin-border-width)) - 2em);
    border-style: double;
    border-color: var(--GW-popins-popin-border-color);
    border-width:  var(--GW-popins-popin-border-width) var(--GW-popins-popin-border-width) 0 var(--GW-popins-popin-border-width);
    background-color: var(--GW-popins-popin-title-bar-background-color);
    --GW-link-underline-background-color: var(--GW-popins-popin-title-bar-background-color);
    display: flex;
    flex-flow: row;
    align-items: center;
    width: -moz-fit-content;
    z-index: 1;
}

.popin {
    --popin-title-bar-height: 0px;
}
.popin.has-title-bar {
    --popin-title-bar-height: var(--GW-popins-popin-title-bar-height);
}

/*  Popin title.
    */
.popin .popframe-title {
    display: flex;
    font-family: var(--GW-sans-serif-font-stack);
    font-size: 0.875rem;
    flex: 1 1 100%;
    padding: 0 1rem;
    white-space: nowrap;
    overflow: hidden;
    text-decoration: none;
    text-align: center;
    text-indent: 0;
}
.popin .popframe-title::after {
    display: none;
}

.popin .popframe-title-link {
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
}

/*  Buttons in the popin title bar.
    */
.popin .popframe-title-bar-button {
    -moz-appearance: none;
    appearance: none;
    border: none;
    background-color: transparent;
    font-size: inherit;
    font-family: inherit;
    font-weight: inherit;
    font-style: inherit;
    margin: 0 1px;
    padding: 4px;
    height: 100%;
    flex: 1 0 auto;
    width: calc(var(--GW-popins-popin-title-bar-height) - 1px);
    cursor: pointer;
    color: var(--GW-popins-popin-title-bar-button-color);
}
.popin .popframe-title-bar-button:active {
    transform: scale(0.9);
}
.popin .popframe-title-bar-button svg {
    max-width: 100%;
    max-height: 100%;
    width: 24px;
    height: 24px;
}

.popin .popframe-title-bar-button:disabled {
    pointer-events: none;
    opacity: 0.35;
}

/*  Popin stack counter.
    */
.popin-stack-counter {
    position: absolute;
    right: calc(100% + var(--GW-popins-popin-border-width));
    bottom: var(--GW-popins-popin-border-width);
    height: calc(var(--GW-popins-popin-title-bar-height) - var(--GW-popins-popin-border-width) - 3px);
    padding: 0 0.5em;
    background-color: var(--GW-popins-popin-border-color);
    border-style: solid;
    border-color: var(--GW-popins-popin-border-color);
    border-width: 1px 0 0 1px;
    font-family: var(--GW-sans-serif-font-stack);
    font-size: 0.8rem;
    font-weight: normal;
    display: flex;
    justify-content: center;
    align-items: center;
    text-indent: 0;
    cursor: default;
    color: var(--GW-popins-popin-stack-counter-text-color);
}

/*┌────────────────────┐*/
/*│ Popin scroll view. │*/
/*└────────────────────┘*/

.popin .popframe-scroll-view {
    overflow-y: auto;
    overscroll-behavior: none;
    max-height: calc(var(--GW-popins-popin-max-height) - 2 * var(--GW-popins-popin-border-width) - var(--popin-title-bar-height));
    height: 100%;
}

/*  Scroll bar styles (for WebKit/Blink).
    */
.popin .popframe-scroll-view::-webkit-scrollbar {
    width: 14px;
}
.popin .popframe-scroll-view::-webkit-scrollbar-thumb {
    background-color: var(--GW-popins-popin-scrollbar-thumb-color);
    box-shadow:
        0 0 0 3px var(--GW-popins-popin-scrollbar-track-color) inset;
}
.popin .popframe-scroll-view::-webkit-scrollbar-thumb:hover {
    background-color: var(--GW-popins-popin-scrollbar-thumb-hover-color);
}

/*  Scroll bar styles (for Firefox).
    */
.popin .popframe-scroll-view {
    scrollbar-color: var(--GW-popins-popin-scrollbar-thumb-color) var(--GW-popins-popin-scrollbar-track-color);
}
.popin .popframe-scroll-view:hover {
    scrollbar-color: var(--GW-popins-popin-scrollbar-thumb-hover-color) var(--GW-popins-popin-scrollbar-track-color);
}

/*┌─────────────────────┐*/
/*│ Popin content view. │*/
/*└─────────────────────┘*/

.popin .popframe-content-view {
    background-color: var(--GW-popins-popin-background-color);
    --GW-link-underline-background-color: var(--GW-popins-popin-title-bar-background-color);
    font-size: 0.9em;
    padding: calc(7em/9) 1em calc(8em/9) 1em;
    overflow: auto;
}

/*┌───────────────────────────┐*/
/*│ Transitional UI elements. │*/
/*└───────────────────────────┘*/

/*  Spinners.
 */
.popin.loading::before,
.popin.rendering::before {
    position: absolute;
    width: 3em;
    height: 3em;
    max-height: 6em;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: auto;
    display: block;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    opacity: 0.2;
    z-index: 1;
}
@keyframes fa-spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/*  Loading spinner (for object popins).
    */
.popin.loading::before {
    content: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M288 24.103v8.169a11.995 11.995 0 0 0 9.698 11.768C396.638 63.425 472 150.461 472 256c0 118.663-96.055 216-216 216-118.663 0-216-96.055-216-216 0-104.534 74.546-192.509 174.297-211.978A11.993 11.993 0 0 0 224 32.253v-8.147c0-7.523-6.845-13.193-14.237-11.798C94.472 34.048 7.364 135.575 8.004 257.332c.72 137.052 111.477 246.956 248.531 246.667C393.255 503.711 504 392.789 504 256c0-121.187-86.924-222.067-201.824-243.704C294.807 10.908 288 16.604 288 24.103z"/></svg>');
    animation: fa-spin 2s infinite linear;
}

.popin.image.loading img,
.popin.image.loading-failed img,
.popin.object.loading-failed iframe {
    visibility: hidden;
}

/*  Rendering spinner.
 */
.popin.rendering::before {
    content: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M460.115 373.846l-6.941-4.008c-5.546-3.202-7.564-10.177-4.661-15.886 32.971-64.838 31.167-142.731-5.415-205.954-36.504-63.356-103.118-103.876-175.8-107.701C260.952 39.963 256 34.676 256 28.321v-8.012c0-6.904 5.808-12.337 12.703-11.982 83.552 4.306 160.157 50.861 202.106 123.67 42.069 72.703 44.083 162.322 6.034 236.838-3.14 6.149-10.75 8.462-16.728 5.011z"/></svg>');
    animation: fa-spin 3s infinite linear;
}

/*  “Loading failed” messages (for object popups).
    */
.popin.loading-failed::after {
    content: "Loading failed.";
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2em;
    font-family: var(--GW-sans-serif-font-stack);
    font-weight: bold;
    text-transform: uppercase;
    opacity: 0.35;
}

/*┌───────────────────────────┐*/
/*│ Links with an open popin. │*/
/*└───────────────────────────┘*/

.popin-open:not(.footnote-ref),
.popin-open:not(.footnote-ref):hover {
    background-color: var(--GW-popins-popin-background-color);
    --GW-link-underline-background-color: var(--GW-popins-popin-background-color);
    --popin-open-highlight-box-shadow-x-offset: 2px;
    box-shadow:
        var(--popin-open-highlight-box-shadow-x-offset) 0 0 5px var(--GW-popins-popin-background-color);
    background-image: none !important;
    display: inline-block;
    text-align: left;
    text-indent: 0;
}
.popin-open:not(.footnote-ref)::before,
.popin-open:not(.footnote-ref):hover::before {
    background-image: none;
    width: calc(100% + 2 * var(--GW-popins-popin-border-width));
    height: calc(100% + 2 * var(--GW-popins-popin-border-width));
    border: var(--GW-popins-popin-border-width) double var(--GW-popins-popin-border-color);
    left: calc(var(--popin-open-highlight-box-shadow-x-offset) - (2 * var(--GW-popins-popin-border-width)));
    bottom: calc(0px - (2 * var(--GW-popins-popin-border-width)));
    top: unset;
}

/*=-------------=*/
/*= POPIN TYPES =*/
/*=-------------=*/

/*┌────────────────────┐*/
/*│ Annotation popins. │*/
/*└────────────────────┘*/

@media only screen and (max-width: 649px) {
    .popin .annotation-abstract figure:first-child {
        margin-top: 1.75em;
    }
    .popin .annotation-abstract.wikipedia-entry figure:first-child {
        margin-top: 1.5em;
    }
}

/*┌──────────────────┐*/
/*│ Footnote popins. │*/
/*└──────────────────┘*/

.popin.footnote {
    min-height: unset;
}

/*┌──────────────────────────┐*/
/*│ Citation context popins. │*/
/*└──────────────────────────┘*/

/*┌──────────────┐*/
/*│ Code popins. │*/
/*└──────────────┘*/

.popin.local-code-file .popframe-title-bar {
    background-color: var(--GW-pre-element-background-color);
}

/*┌────────────────┐*/
/*│ Object popins. │*/
/*└────────────────┘*/

.popin.object iframe,
.popin.object object {
    width: 100%;
    height: calc(var(--GW-popins-popin-max-height) - 2 * var(--GW-popins-popin-border-width) - var(--popin-title-bar-height));
}

/*┌───────────────┐*/
/*│ Image popins. │*/
/*└───────────────┘*/

.popin.image img {
    margin: auto;
    max-height: calc(var(--GW-popins-popin-max-height) - 2 * var(--GW-popins-popin-border-width) - var(--popin-title-bar-height));
}

/*┌───────────────┐*/
/*│ Video popins. │*/
/*└───────────────┘*/

.popin.video-popin {
    padding: 0;
}

.popin.video-popin iframe {
    display: block;
    width: 100%;
}

/*┌───────────────┐*/
/*│ Audio popins. │*/
/*└───────────────┘*/

/*┌────────────────────────┐*/
/*│ Local document popins. │*/
/*└────────────────────────┘*/

/*┌──────────────────────────┐*/
/*│ Local transclude popins. │*/
/*└──────────────────────────┘*/

.popin #page-metadata::after {
    width: calc(100% + 1em);
    margin: 1em -1em 1.125em 0;
}

/*=---------------=*/
/*= POPIN CONTENT =*/
/*=---------------=*/
/*  Adjustments for styles in popins.
    */

/*┌──────────────┐*/
/*│ Style reset. │*/
/*└──────────────┘*/

.popin {
    white-space: normal;
    font-weight: normal;
    font-style: normal;
    font-size: var(--GW-body-text-font-size);
    text-align: unset;
}

/***************/
/* ANNOTATIONS */
/***************/

section.highlighted {
    position: relative;
}
section.highlighted::before {
    content: "";
    display: block;
    position: absolute;
    top: -0.5em;
    left: -1.25em;
    width: calc(100% + 2em);
    height: calc(100% + 1.25em);
    outline: 3px double var(--GW-section-highlighted-border-color);
    z-index: -1;
    transition:
        outline 0.15s ease 0.05s;
}
section.highlight-fading::before {
    outline: 3px double transparent;
}

/*********************/
/* SEQUENTIAL NAV UI */
/*********************/
/* Navigation bar for previous/next page links (horizontal divider based on: https://commons.wikimedia.org/wiki/File:Filet_arabesque.svg ) */

@media only screen and (max-width: 649px) {
    #navigation {
    	display: none; 
    }
}
@media only screen and (min-width: 650px) {
    #navigation {
        margin: 2em 0 0 0;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }
    #navigation a {
        line-height: 1;
        display: flex;
    }
    #navigation a svg {
        margin: 0;
        width: 100%;
        height: 1.6em;
    }
    #navigation #navigation-next,
    #navigation #navigation-previous {
        flex-grow: 1;
    }
    #navigation #navigation-center {
        width: 17%;
    }
    #navigation #navigation-next {
        transform: scale(-1, 1);
    }
    /* override underlining: */
    #navigation #navigation-previous,
    #navigation #navigation-next,
    #navigation #navigation-center {
        text-shadow: none;
        background: var(--GW-sequential-nav-link-background-color);
    }
}

/********************/
/* BACK-TO-TOP LINK */
/********************/

#back-to-top {
    position: absolute;
    bottom: 0.75rem;
    opacity: 1.0;
    visibility: visible;
    transition:
        opacity 2s ease,
        visibility 2s ease;
}
#back-to-top.hidden {
    opacity: 0;
    visibility: hidden;
}
#back-to-top a {
    display: block;
    width: 1.25em;
    color: var(--GW-back-to-top-link-color);
    filter:
        drop-shadow(0 0 1px var(--GW-body-background-color))
        drop-shadow(0 0 1px var(--GW-body-background-color))
        drop-shadow(0 0 1px var(--GW-body-background-color));
}
#back-to-top a:hover {
    color: var(--GW-back-to-top-link-hover-color);
}
#back-to-top svg {
    display: block;
    width: 100%;
}

@media only screen and (max-width: 1184px) {
    #back-to-top {
        left: 4rem;
    }
}
@media only screen and (min-width: 1185px) {
    #back-to-top {
        right: 1rem;
    }
}
@media only screen and (min-width: 1761px) {
    #back-to-top {
        left: unset;
        right: calc(60px + (100% - 1185px) / 2);
    }
}
@media only screen and (max-width: 649px) {
    #back-to-top {
        left: unset;
        right: 1rem;
        bottom: 1rem;
    }
    #back-to-top a {
        width: 1.5em;
        border: 2px solid currentColor;
        background-color: var(--GW-body-background-color);
        padding: 0.125em 0.25em;
    }
}

/*************/
/* DARK MODE */
/*************/

#mode-selector {
    position: absolute;
    right: 0;
    display: flex;
    background-color: var(--GW-mode-selector-background-color);
    padding: 0.1em 0.25em 0.3em 0.25em;
    border: 3px solid transparent;
    opacity: 0.3;
    transition:
        opacity 2s ease;
}
#mode-selector.hidden {
    opacity: 0;
}
#mode-selector:hover {
    transition: none;
    opacity: 1.0;
    border: 3px double var(--GW-mode-selector-border-hover-color);
}
#mode-selector button {
    -moz-appearance: none;
    appearance: none;
    border: none;
    background-color: transparent;
    padding: 0.5em;
    margin: 0 0 0 1.375em;
    line-height: 1;
    font-family: var(--GW-sans-serif-font-stack);
    font-size: 0.75rem;
    text-align: center;
    color: var(--GW-mode-selector-button-text-color);
    position: relative;
    display: flex;
}
#mode-selector button::before {
    width: 1.2em;
    position: absolute;
    left: -15px;
    opacity: 0.35;
    padding: 1px 0 0 0;
}
#mode-selector button.select-mode-auto::before {
    content: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M8 256c0 136.966 111.033 248 248 248s248-111.034 248-248S392.966 8 256 8 8 119.033 8 256zm248 184V72c101.705 0 184 82.311 184 184 0 101.705-82.311 184-184 184z"></path></svg>');
}
#mode-selector button.select-mode-light::before {
    content: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"></path></svg>');
    opacity: 0.45;
    width: 1.3em;
    padding: 0;
    left: -15px;
}
#mode-selector button.select-mode-dark {
    margin-left: 1.125em;
}
#mode-selector button.select-mode-dark::before {
    content: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"></path></svg>');
    width: 1.15em;
    left: -12px;
}
#mode-selector button:not(.selected):hover::before {
    opacity: 1.0;
}
#mode-selector button:hover,
#mode-selector button.selected {
    box-shadow:
        0 2px 0 6px var(--GW-mode-selector-background-color) inset,
        0 1px 0 6px currentColor inset;
}
#mode-selector button:not(:disabled):hover {
    color: var(--GW-mode-selector-button-hover-text-color);
    cursor: pointer;
}
#mode-selector button:not(:disabled):active {
    transform: translateY(2px);
    box-shadow:
        0 0px 0 6px var(--GW-mode-selector-background-color) inset,
        0 -1px 0 6px currentColor inset;
}
#mode-selector button.active:not(:hover)::after {
    content: "";
    position: absolute;
    bottom: 0.25em;
    left: 0;
    right: 0;
    border-bottom: 1px dotted currentColor;
    width: calc(100% - 12px);
    margin: auto;
}
@media only screen and (max-width: 1535px) {
    #mode-selector {
        flex-flow: column;
        padding: 0.1em 0.1em 0.2em 0.15em;
        align-items: flex-start;
    }
    #mode-selector button + button {
        margin-top: 0.25em;
    }
    #mode-selector button.select-mode-light::before {
        left: -16px;
    }
    #mode-selector button.select-mode-dark {
        margin-left: 1.375em;
    }
    #mode-selector button.select-mode-dark::before {
        left: -15px;
    }
}
@media only screen and (max-width: 1279px) {
    #mode-selector {
        padding: 0.1em 0.1em 0.25em 0.15em;
    }
    #mode-selector button[class^='select-mode-'] {
        color: transparent;
        margin: 0;
        padding: 0;
        width: 2em;
        height: 2em;
        align-items: center;
        box-shadow: none;
        opacity: 0.55;
    }
    #mode-selector  button[class^='select-mode-'] + button {
        margin-top: 0.5em;
    }
    #mode-selector button[class^='select-mode-']::before {
        left: 12.5%;
        width: 75%;
        height: 75%;
    }
    #mode-selector button:not(:disabled):hover {
        color: transparent;
    }
    #mode-selector button:hover,
    #mode-selector button.selected {
        opacity: 1.0;
    }
}
@media only screen and (max-width: 649px) {
    #mode-selector {
        top: unset;
        bottom: 4em;
    }
    #mode-selector button[class^='select-mode-'] {
        width: 2.25em;
        height: 2.25em;
    }
}

/***************/
/* READER MODE */
/***************/

/*┌───────────────────────────────────────────┐*/
/*│ Masked links key toggle info alert panel. │*/
/*└───────────────────────────────────────────┘*/

#masked-links-key-toggle-info-alert {
    position: absolute;
    background-color: var(--GW-reader-mode-masked-links-key-toggle-info-alert-panel-background-color);
    color: var(--GW-reader-mode-masked-links-key-toggle-info-alert-panel-text-color);
    text-shadow:
        0 0 1px var(--GW-reader-mode-masked-links-key-toggle-info-alert-panel-text-shadow-color),
        0 0 3px var(--GW-reader-mode-masked-links-key-toggle-info-alert-panel-text-shadow-color),
        0 0 5px var(--GW-reader-mode-masked-links-key-toggle-info-alert-panel-text-shadow-color);
    padding: 0.5em 1em;
    left: 2px;
    bottom: 1.5em;
    font-family: var(--GW-sans-serif-font-stack);
    font-weight: 700;
    pointer-events: none;
}
#masked-links-key-toggle-info-alert.hidden {
    visibility: hidden;
    opacity: 0;
    transition:
        visibility 0.15s ease,
        opacity 0.15s ease;
}
#masked-links-key-toggle-info-alert img {
    display: inline-block;
    width: 1.25em;
    filter: invert(1) drop-shadow(0 0 3px var(--GW-reader-mode-masked-links-key-toggle-info-alert-panel-text-shadow-color));
    vertical-align: text-bottom;
    margin: 0 0.625em 0 0;
    top: -0.05em;
    position: relative;
}
#masked-links-key-toggle-info-alert .key {
    border: 1px solid var(--GW-reader-mode-masked-links-key-toggle-info-alert-panel-key-icon-border-color);
    padding: 0.05em 0.375em 0.125em 0.375em;
    display: inline-block;
    border-radius: 4px;
    margin: 0 0.1875em 0 0.125em;
    background-color: var(--GW-reader-mode-masked-links-key-toggle-info-alert-panel-key-icon-background-color);
    box-shadow:
        1px 1px 3px 0 var(--GW-reader-mode-masked-links-key-toggle-info-alert-panel-text-shadow-color);
    font-feature-settings: 'smcp';
}

/*┌───────────────────────┐*/
/*│ Reader mode selector. │*/
/*└───────────────────────┘*/

#reader-mode-selector {
    position: absolute;
    right: 11em;
    display: flex;
    background-color: var(--GW-mode-selector-background-color);
    padding: 0.1em 0.25em 0.3em 0.25em;
    border: 3px solid transparent;
    opacity: 0.3;
    transition:
        opacity 2s ease;
}
#reader-mode-selector.hidden {
    opacity: 0;
}
#reader-mode-selector:hover {
    transition: none;
    opacity: 1.0;
    border: 3px double var(--GW-mode-selector-border-hover-color);
}
#reader-mode-selector button {
    -moz-appearance: none;
    appearance: none;
    border: none;
    background-color: transparent;
    padding: 0.5em;
    margin: 0 0 0 1.875em;
    line-height: 1;
    font-family: var(--GW-sans-serif-font-stack);
    font-size: 0.75rem;
    text-align: center;
    color: var(--GW-mode-selector-button-text-color);
    position: relative;
    display: flex;
}
#reader-mode-selector button::before {
    width: calc(7/5 * 1em);
    height: calc(7/5 * 1em);
    position: absolute;
    left: calc(1px + -4/3 * 1em);
    opacity: 0.4;
    top: 0.5em;
}
#reader-mode-selector button.select-mode-auto::before {
    content: url('/assets/MKR Logo.svg');
    top: 0.4em;
}
#reader-mode-selector button.select-mode-on::before {
    content: url('/assets/WM Logo.svg');
}
#reader-mode-selector button.select-mode-off::before {
    content: url('/assets/MKR Logo.svg');
}
#reader-mode-selector button:not(.selected):hover::before {
    opacity: 1.0;
}
#reader-mode-selector button:hover,
#reader-mode-selector button.selected {
    box-shadow:
        0 2px 0 6px var(--GW-mode-selector-background-color) inset,
        0 1px 0 6px currentColor inset;
}
#reader-mode-selector button:not(:disabled):hover {
    color: var(--GW-mode-selector-button-hover-text-color);
    cursor: pointer;
}
#reader-mode-selector button:not(:disabled):active {
    transform: translateY(2px);
    box-shadow:
        0 0px 0 6px var(--GW-mode-selector-background-color) inset,
        0 -1px 0 6px currentColor inset;
}
#reader-mode-selector button.active:not(:hover)::after {
    content: "";
    position: absolute;
    bottom: 0.25em;
    left: 0;
    right: 0;
    border-bottom: 1px dotted currentColor;
    width: calc(100% - 12px);
    margin: auto;
}
@media only screen and (max-width: 1800px) {
    #reader-mode-selector {
        right: 0;
        top: 2em;
    }
}
@media only screen and (max-width: 1535px) {
    #reader-mode-selector {
        flex-flow: column;
        padding: 0.1em 0.1em 0.2em 0.15em;
        align-items: flex-start;
        top: 7em;
    }
    #reader-mode-selector button + button {
        margin-top: 0.25em;
    }
}
@media only screen and (max-width: 1279px) {
    #reader-mode-selector {
        padding: 0.1em 0.1em 0.25em 0.15em;
        background-color: var(--GW-mode-selector-mobile-background-color);
        opacity: 1.0;
    }
    #reader-mode-selector button {
        color: transparent;
        margin: 0;
        padding: 0;
        width: 2em;
        height: 2em;
        align-items: center;
        box-shadow: none;
        opacity: 0.25;
    }
    #reader-mode-selector button.select-mode-off {
        opacity: 0.3;
    }
    #reader-mode-selector  button + button {
        margin-top: 0.5em;
    }
    #reader-mode-selector button::before {
        left: 12.5%;
        width: 75%;
        height: 75%;
    }
    #reader-mode-selector button:not(:disabled):hover {
        color: transparent;
    }
    #reader-mode-selector button:hover,
    #reader-mode-selector button.selected {
        opacity: 0.75;
    }
    #reader-mode-selector button.select-mode-on:hover,
    #reader-mode-selector button.select-mode-on.selected {
        opacity: 0.55;
    }
    #reader-mode-selector button.select-mode-off:hover,
    #reader-mode-selector button.select-mode-off.selected {
        opacity: 0.85;
    }
}
@media only screen and (max-width: 649px) {
    #reader-mode-selector {
        top: unset;
        bottom: 11em;
    }
    #reader-mode-selector button[class^='select-mode-'] {
        width: 2.25em;
        height: 2.25em;
    }
}
